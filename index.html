<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>macOS Backup Suite</title>
  <link rel="stylesheet" href="/src/styles.css" />
</head>
<body>
  <div class="container">
    <header>
      <div class="header-top">
        <h1>ğŸ›¡ï¸ macOS Backup Suite</h1>
        <div class="header-controls">
          <button id="btn-settings" class="icon-btn" title="Einstellungen">âš™ï¸</button>
          <button id="btn-language" class="icon-btn" title="Sprache wechseln">ğŸŒ</button>
          <button id="btn-theme" class="icon-btn" title="Design wechseln">ğŸŒ“</button>
        </div>
      </div>
      <p id="status">Bereit</p>
    </header>

    <!-- Full Disk Access Warning -->
    <div id="fda-warning" class="fda-warning" style="display: none;"></div>

    <main>
      <!-- Row 1 -->
      <div class="two-column-layout">
        <!-- Left: Backup-Ziel -->
        <section class="section">
          <h2>ğŸ“ Backup-Ziel</h2>
          <div class="form-group">
            <label for="volume-select">Volume:</label>
            <div class="input-group">
              <select id="volume-select">
                <option value="">Bitte wÃ¤hlen...</option>
              </select>
              <button id="refresh-volumes" title="Volumes aktualisieren">ğŸ”„</button>
            </div>
          </div>
          <div class="form-group">
            <label>Zielverzeichnis:</label>
            <div class="input-group target-path-group">
              <span id="target-path-display" class="path-display">Nicht ausgewÃ¤hlt</span>
              <button id="browse-target" title="Verzeichnis auswÃ¤hlen">ğŸ“‚</button>
            </div>
          </div>
        </section>

        <!-- Right: Zu sichernde Ordner -->
        <section class="section">
          <h2>ğŸ“‚ Zu sichernde Ordner</h2>
          <ul id="directories-list" class="directories-list"></ul>
          <div class="button-row">
            <button id="add-directory" class="btn-secondary">+ Ordner hinzufÃ¼gen</button>
            <button id="add-user-directory" class="btn-secondary">ğŸ‘¤ Benutzerordner...</button>
            <button id="add-system-configs" class="btn-secondary" title="Wichtige Konfig-Dateien fÃ¼r schnelle Wiederherstellung">ğŸ“¦ System-Configs</button>
            <button id="reset-directories" class="btn-secondary">â†» ZurÃ¼cksetzen</button>
          </div>
        </section>
      </div>

      <!-- Row 2 -->
      <div class="two-column-layout">
        <!-- Left: Aktionen -->
        <section class="section">
          <h2>ğŸš€ Aktionen</h2>
          <div class="button-row primary-actions">
            <button id="btn-backup" class="btn-primary">Backup erstellen</button>
            <button id="btn-cancel" class="btn-danger" style="display: none;">Abbrechen</button>
            <button id="btn-restore" class="btn-secondary">Wiederherstellen</button>
          </div>
          
          <div class="progress-section">
            <p id="progress-message">Bereit</p>
            <div class="progress-bar">
              <div id="progress-fill" class="progress-fill"></div>
            </div>
          </div>
        </section>

        <!-- Right: Vorhandene Backups -->
        <section class="section">
          <h2>ğŸ”„ Vorhandene Backups</h2>
          <div class="form-group">
            <select id="backup-select">
              <option value="">Backup wÃ¤hlen...</option>
            </select>
          </div>
          <div class="button-row">
            <button id="show-files" class="btn-secondary">ğŸ“‹ Dateien anzeigen</button>
            <button id="btn-restore-test" class="btn-secondary">âœ“ Verifizieren</button>
            <button id="btn-delete-backup" class="btn-danger">ğŸ—‘ï¸ LÃ¶schen</button>
          </div>
        </section>
      </div>

      <!-- Row 3: Log Section - Full Width -->
      <section class="section log-section">
        <h2>ğŸ“œ Protokoll</h2>
        <pre id="log-output"></pre>
        <div class="button-row">
          <button id="copy-log" class="btn-secondary">ğŸ“‹ Kopieren</button>
          <button id="save-log" class="btn-secondary">ï¿½ï¿½ Speichern</button>
          <button id="clear-log" class="btn-secondary">ğŸ—‘ï¸ LÃ¶schen</button>
        </div>
      </section>
    </main>

    <footer>
      <p>macOS Backup Suite v1.0 â€“ Sichere Datensicherung fÃ¼r deinen Mac</p>
    </footer>
  </div>

  <script type="module" src="/src/main.ts"></script>

  <!-- Settings Modal -->
  <dialog id="settings-dialog" class="modal">
    <div class="modal-content">
      <h2>âš™ï¸ <span data-i18n="settings">Einstellungen</span></h2>
      
      <div class="settings-section">
        <h3><span data-i18n="defaultFolders">Standard-Ordner</span></h3>
        <p class="settings-hint"><span data-i18n="defaultFoldersHint">Diese Ordner werden beim ZurÃ¼cksetzen verwendet:</span></p>
        <ul id="default-directories-list" class="directories-list"></ul>
        <div class="button-row">
          <button id="add-default-directory" class="btn-secondary">+ <span data-i18n="addFolder">Ordner hinzufÃ¼gen</span></button>
        </div>
      </div>
      
      <div class="modal-actions">
        <button id="settings-cancel" class="btn-secondary"><span data-i18n="cancel">Abbrechen</span></button>
        <button id="settings-save" class="btn-primary"><span data-i18n="save">Speichern</span></button>
      </div>
    </div>
  </dialog>

  <!-- User Folder Picker Modal -->
  <dialog id="user-folder-dialog" class="modal">
    <div class="modal-content modal-large">
      <h2>ğŸ‘¥ <span data-i18n="selectUserFolder">Benutzerordner auswÃ¤hlen</span></h2>
      
      <div class="user-folder-section">
        <ul id="user-folder-list" class="user-folder-list"></ul>
      </div>
      
      <div class="modal-actions">
        <button id="user-folder-close" class="btn-secondary"><span data-i18n="close">SchlieÃŸen</span></button>
      </div>
    </div>
  </dialog>

    <!-- Restore Modal -->
    <div id="restore-modal" class="restore-overlay" style="display: none;">
      <div class="modal-content restore-modal-content">
        <h2 id="restore-modal-title">ğŸ”„ Wiederherstellung</h2>
        <p id="restore-select-text">Elemente zur Wiederherstellung auswÃ¤hlen:</p>
        
        <div class="restore-actions-top">
          <button id="restore-select-all" class="btn-small">Alle auswÃ¤hlen</button>
          <button id="restore-deselect-all" class="btn-small">Alle abwÃ¤hlen</button>
        </div>
        
        <div id="restore-items-list" class="restore-items-list">
          <!-- Items will be populated dynamically -->
        </div>
        
        <div class="restore-options">
          <label class="checkbox-label">
            <input type="checkbox" id="restore-overwrite" />
            <span id="overwrite-label">Bestehende Dateien Ã¼berschreiben</span>
          </label>
          <p class="hint" id="overwrite-hint">Wenn deaktiviert, werden existierende Dateien Ã¼bersprungen</p>
        </div>
        
        <div class="modal-buttons">
          <button id="restore-cancel" class="btn-secondary">Abbrechen</button>
          <button id="restore-start" class="btn-primary">ğŸ”„ Wiederherstellen</button>
        </div>
      </div>
    </div>

  </body>
</html>
